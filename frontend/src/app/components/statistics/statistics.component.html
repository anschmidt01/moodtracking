<div class="statistics-container">
    <h2>ðŸ“Š Deine Stimmungsauswertung</h2>
  
    <div *ngIf="isLoading" class="loading-message">Lade Statistik...</div>
    <div *ngIf="error" class="error-message">{{ error }}</div>
  
    <div *ngIf="!isLoading && !error" class="chart-wrapper">
      <canvas
        baseChart
        [data]="chartData"
        [type]="'doughnut'"
        [options]="chartOptions"
        (chartClick)="onChartClick($event)">
      </canvas>
    </div>
  
    <ul class="mood-list" *ngIf="!isLoading && !error">
      <li *ngFor="let stat of moodStats" [ngStyle]="{ 'background-color': getColor(stat.mood_id) }">
        <span class="color-indicator" [style.background]="getColor(stat.mood_id)"></span>
        <strong>{{ getEmoji(stat.mood_id) }} {{ getMoodText(stat.mood_id) }}</strong>
        <span>
          {{ stat.count }} 
          {{ stat.count === 1 ? 'Eintrag' : 'EintrÃ¤ge' }} 
          ({{ stat.percentage }}%)
        </span>
      </li>
    </ul>
  
    <div class="entries-list" *ngIf="selectedMoodId && filteredEntries.length">
      <div
        *ngFor="let entry of filteredEntries"
        class="entry-card">
        <div class="icon">{{ getEmoji(entry.mood_id) }}</div>
        <div class="content">
          <div class="date">{{ entry.date | date: 'fullDate' }}</div>
          <div class="mood">{{ getMoodText(entry.mood_id) }}</div>
          <div class="details-link">
            <a [routerLink]="['/history', entry.id]">Details anzeigen</a>
          </div>
        </div>
      </div>
    </div>
  </div>
  